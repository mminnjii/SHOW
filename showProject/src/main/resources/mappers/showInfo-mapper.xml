<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="showInfoMapper">

	<resultMap type="Show" id="showResultSet">
		<result column="SHOW_NO" property="showNo" />
		<result column="SHOW_NAME" property="showName" />
		<result column="SHOW_EXPLAIN" property="showExplain" />
		<result column="PRICE" property="price" />
		<result column="NOTICE" property="notice" />
		<result column="PRECAUTION" property="precaution" />
		<result column="STATUS" property="status" />
		<result column="HALL_NO" property="hallNo" />
		<result column="GENRE_NO" property="genreNo" />
		<result column="REGION_NO" property="regionNo" />
		<result column="SHOW_START" property="showStart" />
		<result column="SHOW_END" property="showEnd" />
		<result column="COUNT" property="count" />
		
		<result column="HALL_NAME" property="hall.hallName" />
		
	</resultMap>	

 <!-- 뮤지컬 랭킹(1~5위) count 순으로 리스트 -->
  <select id="musicalShowList" resultMap="showResultSet">
  	SELECT *

  	FROM (
  		  SELECT SHOW_NAME
  	       		 ,SHOW_START
  	       		 ,SHOW_END
  	      FROM SHOW
  	      WHERE GENRE_NO = '2'
  	      ORDER BY COUNT DESC
  	      )

  	WHERE ROWNUM BETWEEN 1 AND 5
  </select>
  	       
  


  	       
  	<!-- 공연상세 페이지를 위한 공연정보 조회 -->
	<select id="selectShow" resultMap="showResultSet">
		SELECT S.SHOW_NO,
		        SHOW_NAME,
		        SHOW_EXPLAIN,
		        PRICE,
		        NOTICE,
		        HALL_NAME,
		        GENRE_NAME,
		        REGION_NAME,
		        SHOW_START,
		        SHOW_END
		FROM SHOW S
		JOIN HALL H  ON (S.HALL_NO = H.HALL_NO)
		JOIN GENRE G ON (S.GENRE_NO = G.GENRE_NO)
		JOIN REGION R ON (S.REGION_NO = R.REGION_NO)
		WHERE S.STATUS = 'Y'
	</select>


	<!-- 뮤지컬 경기/인천 지역 리스트 -->
	  <select id="InchMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '2'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 뮤지컬 충청/강원 지역 리스트 -->
	  <select id="chMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '3'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 뮤지컬 대구/경북 지역 리스트 -->
	  <select id="deguMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '4'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 뮤지컬 부산/경남 지역 리스트 -->
	  <select id="busanMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '5'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 뮤지컬 광주/전라 지역 리스트 -->
	  <select id="kwMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '6'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 뮤지컬 제주 지역 리스트 -->
	  <select id="jejMusical" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '7'
		ORDER BY SHOW_NO
	  </select>
	  
	  
	  <!-- 연극 랭킹(1~5위) count 순으로 리스트 -->
	  <select id="playShowList" resultMap="showResultSet">
	  	SELECT *
	  	FROM (
	  		  SELECT SHOW_NAME
	  	       		 ,SHOW_START
	  	       		 ,SHOW_END
	  	      FROM SHOW
	  	      WHERE GENRE_NO = '2'
	  	      ORDER BY COUNT DESC
	  	      )
	  	WHERE ROWNUM BETWEEN 1 AND 5
	  </select>
	  
	  <!-- 연극 경기/인천 지역 리스트 -->
	  <select id="InchPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '2'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 연극 충청/강원 지역 리스트 -->
	  <select id="chPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '3'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 연극 대구/경북 지역 리스트 -->
	  <select id="deguPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '4'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 연극 부산/경남 지역 리스트 -->
	  <select id="busanPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '5'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 연극 광주/전라 지역 리스트 -->
	  <select id="kwPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '6'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 뮤지컬 제주 지역 리스트 -->
	  <select id="jejPlay" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '7'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 콘서트 랭킹(1~5위) count 순으로 리스트 -->
	  <select id="concertShowList" resultMap="showResultSet">
	  	SELECT *
	  	FROM (
	  		  SELECT SHOW_NAME
	  	       		 ,SHOW_START
	  	       		 ,SHOW_END
	  	      FROM SHOW
	  	      WHERE GENRE_NO = '2'
	  	      ORDER BY COUNT DESC
	  	      )
	  	WHERE ROWNUM BETWEEN 1 AND 5
	  </select>
	
	<!-- 콘서트 경기/인천 지역 리스트 -->
	  <select id="concertRegionList1" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '2'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 콘서트 충청/강원 지역 리스트 -->
	  <select id="concertRegionList2" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '3'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 콘서트 대구/경북 지역 리스트 -->
	  <select id="concertRegionList3" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '4'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 콘서트 부산/경남 지역 리스트 -->
	  <select id="concertRegionList4" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '5'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 콘서트 광주/전라 지역 리스트 -->
	  <select id="concertRegionList5" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '6'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 콘서트 제주 지역 리스트 -->
	  <select id="concertRegionList6" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '7'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 클래식 랭킹(1~5위) count 순으로 리스트 -->
	  <select id="classicShowList" resultMap="showResultSet">
	  	SELECT *
	  	FROM (
	  		  SELECT SHOW_NAME
	  	       		 ,SHOW_START
	  	       		 ,SHOW_END
	  	      FROM SHOW
	  	      WHERE GENRE_NO = '2'
	  	      ORDER BY COUNT DESC
	  	      )
	  	WHERE ROWNUM BETWEEN 1 AND 5
	  </select>
	  
	  <!-- 클래식 경기/인천 지역 리스트 -->
	  <select id="classicRegion1" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '2'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 클래식 충청/강원 지역 리스트 -->
	  <select id="classicRegion2" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '3'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 클래식 대구/경북 지역 리스트 -->
	  <select id="classicRegion3" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '4'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 클래식 부산/경남 지역 리스트 -->
	  <select id="classicRegion4" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '5'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 클래식 광주/전라 지역 리스트 -->
	  <select id="classicRegion5" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '6'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 클래식 제주 지역 리스트 -->
	  <select id="classicRegion6" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '7'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 전시 랭킹(1~5위) count 순으로 리스트 -->
	  <select id="displayShow" resultMap="showResultSet">
	  	SELECT *
	  	FROM (
	  		  SELECT SHOW_NAME
	  	       		 ,SHOW_START
	  	       		 ,SHOW_END
	  	      FROM SHOW
	  	      WHERE GENRE_NO = '2'
	  	      ORDER BY COUNT DESC
	  	      )
	  	WHERE ROWNUM BETWEEN 1 AND 5
	  </select>
	  
	  
	  <!-- 전시 경기/인천 지역 리스트 -->
	  <select id="displayRegion1" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '2'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 전시 충청/강원 지역 리스트 -->
	  <select id="displayRegion2" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '3'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 전시 대구/경북 지역 리스트 -->
	  <select id="displayRegion3" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '4'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 전시 부산/경남 지역 리스트 -->
	  <select id="displayRegion4" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '5'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 전시 광주/전라 지역 리스트 -->
	  <select id="displayRegion5" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '6'
		ORDER BY SHOW_NO
	  </select>
	  
	   <!-- 전시 제주 지역 리스트 -->
	  <select id="displayRegion6" resultMap="showResultSet">
	  	SELECT SHOW_NAME
      		   ,SHOW_START
               ,SHOW_END
		FROM SHOW
		WHERE GENRE_NO = '1'
		AND REGION_NO = '7'
		ORDER BY SHOW_NO
	  </select>
	  
	  <!-- 검색 목록 개수 -->
	  <select id="searchListCount" resultType="_int">
	  	SELECT COUNT(*)
	  	FROM SHOW
	  	WHERE STATUS = 'Y'
	  	AND SHOW_NAME LIKE '%' || #{keyword} || '%'
	  	
	  	
	  </select>
	  
	  <!-- 검색 목록 -->
		<select id="searchBox" resultMap="showResultSet">
	     SELECT S.SHOW_NO,
	           SHOW_NAME,
	           SHOW_EXPLAIN,
	           PRICE,
	           NOTICE,
	           HALL_NAME,
	           GENRE_NAME,
	           REGION_NAME,
	           COUNT,
               SHOW_START,
               SHOW_END
	    FROM SHOW S
	    JOIN GENRE USING(GENRE_NO)
	    JOIN REGION USING(REGION_NO)
	    JOIN HALL H USING(HALL_NO)
	    WHERE STATUS = 'Y'
	    AND SHOW_NAME LIKE '%' || #{keyword} || '%' 
	    ORDER BY SHOW_START DESC
	</select>

	  
	
		
</mapper>