<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="showInfoMapper">

	<resultMap type="Show" id="showResultSet">
		<result column="SHOW_NO" property="showNo" />
		<result column="SHOW_NAME" property="showName" />
		<result column="SHOW_EXPLAIN" property="showExplain" />
		<result column="PRICE" property="price" />
		<result column="NOTICE" property="notice" />
		<result column="PRECAUTION" property="precaution" />
		<result column="STATUS" property="status" />
		<result column="HALL_NO" property="hallNo" />
		<result column="GENRE_NO" property="genreNo" />
		<result column="REGION_NO" property="regionNo" />
		<result column="SHOW_START" property="showStart" />
		<result column="SHOW_END" property="showEnd" />
		<result column="COUNT" property="count" />
		
	</resultMap>	

 <!-- 뮤지컬 랭킹(1~5위) count 순으로 리스트 -->
  <select id="musicalShowList" resultMap="showResultSet">
  	SELECT *
  	FROM (SELECT SHOW_NAME
  	       		 ,SHOW_START
  	       		 ,SHOW_END
  	      FROM SHOW
  	      WHERE GENRE_NO = '2'
  	      AND ORDER BY COUNT DESC)
  	      
  	<![CDATA[ WHERE ROWNUM <= 5 ]]>  
  </select>
  	       
  	       
  	<!-- 공연상세 페이지를 위한 공연정보 조회 -->
	<select id="selectShow" resultMap="showResultSet">
		SELECT S.SHOW_NO,
		        SHOW_NAME,
		        SHOW_EXPLAIN,
		        PRICE,
		        NOTICE,
		        HALL_NAME,
		        GENRE_NAME,
		        REGION_NAME,
		        SHOW_START,
		        SHOW_END
		FROM SHOW S
		JOIN HALL H  ON (S.HALL_NO = H.HALL_NO)
		JOIN GENRE G ON (S.GENRE_NO = G.GENRE_NO)
		JOIN REGION R ON (S.REGION_NO = R.REGION_NO)
		WHERE S.STATUS = 'Y'
	</select>
	
	
		
</mapper>