<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="managerMapper">

	<resultMap type="Manager" id="managerResultSet">
		<result column="MANAGER_ID" property="managerId" />
		<result column="MANAGER_PW" property="managerPw" />
	</resultMap>
	<resultMap type="Notice" id="noticeResultSet">
		<result column="NOTICE_NO" property="noticeNo"/>
		<result column="NOTICE_TITLE" property="noticeTitle"/>
		<result column="NOTICE_CONTENT" property="noticeContent"/>
		<result column="CREATEDATE" property="createDate"/>
		<result column="COUNT" property="count"/>
	</resultMap>
	<resultMap type="Show" id="showResultSet">
		<result column="SHOW_NO" property="showNo"></result>
		<result column="SHOW_NAME" property="showName"></result>
		<result column="SHOW_EXPLAIN" property="showExplain"></result>
		<result column="PRICE" property="price"></result>
		<result column="NOTICE" property="notice"></result>
		<result column="HALL_NO" property="hallNo"></result>
		<result column="GENRE_NO" property="genreNo"></result>
		<result column="REGION_NO" property="regionNo"></result>
		<result column="SHOW_START" property="showStart"></result>
		<result column="SHOW_END" property="showEnd"></result>
		<result column="COUNT" property="count"></result>
		<result column="POSTER_ORIGINNAME" property="posterOriginName"></result>
		<result column="POSTER_CHANGENAME" property="posterChangeName"></result>
		<result column="DETAIL_ORIGINNAME" property="detailOriginName"></result>
		<result column="DETAIL_CHANGENAME" property="detailChangeName"></result>
	</resultMap>
	<resultMap type="ShowInfo" id="showInfoResultSet">
		<result column="SHOW_NO" property="showNo"></result>
		<result column="SHOW_NAME" property="showName"></result>
		<result column="SHOW_EXPLAIN" property="showExplain"></result>
		<result column="STATUS" property="status"></result>
		<result column="HALL_NAME" property="hallName"></result>
		<result column="GENRE_NAME" property="genreName"></result>
		<result column="REGION_NAME" property="regionName"></result>
		<result column="SHOW_START" property="showStart"></result>
		<result column="SHOW_END" property="showEnd"></result>
		<result column="COUNT" property="count"></result>
	</resultMap>
	<resultMap type="Faq" id="faqResultSet">
		<result column="FAQ_NO" property="faqNo"></result>
		<result column="FAQ_TITLE" property="faqTitle"></result>
		<result column="FAQ_CONTENT" property="faqContent"></result>
		<result column="QCATEGORY_NO" property="qcategoryNo"></result>
		<result column="COUNT" property="count"></result>
	</resultMap>
	<resultMap type="Member" id="memberResultSet">
		<result column="USER_NO" property="userNo"></result>
		<result column="USER_ID" property="userId"></result>
		<result column="USER_NAME" property="userName"></result>
		<result column="USER_RRN" property="userRrn"></result>
		<result column="PHONE" property="phone"></result>
		<result column="EMAIL" property="email"></result>
		<result column="ADDRESS" property="address"></result>
		<result column="ENROLL_DATE" property="enrollDate"></result>
		<result column="MODIFY_DATE" property="modifyDate"></result>
		<result column="RANK" property="rank"></result>
		<result column="SUBSCRIBE" property="subscribe"></result>
		<result column="STATUS" property="status"></result>
	</resultMap>
	<resultMap type="ManagerReservation" id="reservResultSet">
		<result column="RESERVATION_ID" property="reservationId"></result>
		<result column="SHOW_NAME" property="showName"></result>
		<result column="ROUND_ID" property="roundId"></result>
		<result column="USER_NAME" property="userName"></result>
		<result column="HALL_NAME" property="hallName"></result>
		<result column="STATUS" property="status"></result>
		<result column="CREATEDATE" property="createDate"></result>
	</resultMap>
	
	<select id="loginManager" resultMap="managerResultSet">
		SELECT MANAGER_ID, MANAGER_PW
		FROM MANAGER
		WHERE MANAGER_ID = #{managerId}
		AND MANAGER_PW = #{managerPw}
	</select>
	
	<select id="selectAllNotice" resultMap="noticeResultSet">
		SELECT NOTICE_NO,
			   NOTICE_TITLE,
			   COUNT,
			   CREATEDATE
		FROM NOTICE
	</select>
	
	<select id="selectAllFaq" resultMap="faqResultSet">
		SELECT FAQ_NO,
			   FAQ_TITLE,
			   COUNT
		FROM FAQ
	</select>
	
	<select id="selectAllMember" resultMap="memberResultSet">
		SELECT USER_NO,
			   USER_ID,
			   USER_NAME,
			   USER_RRN,
			   PHONE,
			   EMAIL,
			   ADDRESS,
			   ENROLL_DATE,
			   MODIFY_DATE,
			   RANK,
			   SUBSCRIBE,
			   STATUS
		FROM MEMBER
	</select>
	
	<select id="selectAllReserv" resultMap="reservResultSet">
        SELECT RESERVATION_ID, 
        	   SHOW_NAME, 
        	   ROUND_ID, 
        	   USER_NAME, 
        	   HALL_NAME, 
        	   STATUS, 
        	   CREATEDATE
        FROM RESERVATION R
        INNER JOIN SHOW S ON R.SHOW_NO = S.SHOW_NO
        INNER JOIN MEMBER M ON R.USER_NO = M.USER_NO
        INNER JOIN HALL H ON R.HALL_NO = H.HALL_NO
	</select>
	
	<select id="selectAllShow" resultMap="showInfoResultSet">
		SELECT   S.SHOW_NO, 
	             S.SHOW_NAME,
	             S.SHOW_EXPLAIN,
	             S.STATUS,
	             H.HALL_NAME,
	             G.GENRE_NAME,
	             R.REGION_NAME,
	             S.SHOW_START,
	             S.SHOW_END,
	             S.COUNT
		FROM SHOW S
		INNER JOIN HALL H USING (HALL_NO)
		INNER JOIN GENRE G USING (GENRE_NO)
		INNER JOIN REGION R USING (REGION_NO)
		ORDER BY S.SHOW_NO
	</select>
	
	<!--
	<select id="selectAllShow" resultMap="showResultSet">
		SELECT SHOW_NO "공연 가격", 
			   SHOW_NAME "공연 이름",
			   SHOW_EXPLAIN "공연 설명",
			   STATUS "공연 상태",
			   HALL_NO "공연장 이름",
			   GENRE_NO "장르 이름",
			   REGION_NO "지역 이름",
			   SHOW_START "공연 시작일",
			   SHOW_END "공연 종료일",
			   COUNT "조회수"
		FROM SHOW
	</select>

	<select id="loginManager" resultMap="managerResultSet">
		SELECT MANAGER_ID, MANAGER_PW
		FROM MANAGER
		WHERE MANAGER_ID = #{managerId}
		AND MANAGER_PW = #{managerPw}
	</select>
	
	<select id="selectAllNotice" resultMap="noticeResultSet">
		SELECT NOTICE_NO "공지사항 번호",
			   NOTICE_TITLE "공지사항 제목",
			   COUNT "조회수",
			   CREATEDATE "작성일"
		FROM NOTICE
	</select>
	
	<select id="selectAllFaq" resultMap="faqResultSet">
		SELECT FAQ_NO "FAQ 번호",
			   FAQ_TITLE "FAQ 제목",
			   COUNT "조회수"
		FROM FAQ
	</select>
	
	<select id="selectAllMember" resultMap="memberResultSet">
		SELECT USER_NO "사용자 번호",
			   USER_ID "사용자 아이디",
			   USER_NAME "사용자 이름",
			   USER_RRN "사용자 주민번호",
			   PHONE "사용자 연락처",
			   EMAIL "사용자 이메일",
			   ADDRESS "사용자 주소",
			   ENROLL_DATE "사용자 가입일",
			   MODIFY_DATE "사용자 정보 수정일",
			   RANK "사용자 등급",
			   SUBSCRIBE "사용자 구독 여부",
			   STATUS "사용자 계정 상태"
		FROM MEMBER
	</select>
	
	<select id="selectAllReserv" resultMap="reservResultSet">
        SELECT RESERVATION_ID "예약 번호", 
        	   SHOW_NAME "공연 이름", 
        	   ROUND_ID "공연 회차", 
        	   USER_NAME "예약자 이름", 
        	   HALL_NAME "예약 공연장 이름", 
        	   STATUS "예약 상태", 
        	   CREATEDATE "예약일"
        FROM RESERVATION R
        INNER JOIN SHOW S ON R.SHOW_NO = S.SHOW_NO
        INNER JOIN MEMBER M ON R.USER_NO = M.USER_NO
        INNER JOIN HALL H ON R.HALL_NO = H.HALL_NO
	</select>
	
	<select id="selectAllShow" resultMap="showResultSet">
		SELECT SHOW_NO "공연 가격", 
			   SHOW_NAME "공연 이름",
			   SHOW_EXPLAIN "공연 설명",
			   STATUS "공연 상태",
			   HALL_NO "공연장 이름",
			   GENRE_NO "장르 이름",
			   REGION_NO "지역 이름",
			   SHOW_START "공연 시작일",
			   SHOW_END "공연 종료일",
			   COUNT "조회수"
		FROM SHOW
	</select>
	 -->
	<insert id="showInsert" parameterType="Show">
		INSERT INTO SHOW(SHOW_NO,
						 SHOW_NAME,
						 SHOW_EXPLAIN,
						 RPRICE,
						 SPRICE,
						 VPRICE,
						 NOTICE,
						 HALL_NO,
						 GENRE_NO,
						 REGION_NO,
						 SHOW_START,
						 SHOW_END,
						 COUNT,
						 POSTER_ORIGINNAME,
						 POSTER_CHANGENAME,
						 DETAIL_ORIGINNAME,
						 DETAIL_CHANGENAME)
				VALUES(SHOW_SEQ.NEXTVAL,
					   #{showName},
					   #{showExplain},
					   #{rPrice},
					   #{sPrice},
					   #{vPrice},
					   #{notice},
					   #{hallNo},
					   #{genreNo},
					   #{regionNo},
					   #{showStart},
					   #{showEnd},
					   #{count},
					   #{posterOriginName},
					   #{posterChangeName},
					   #{detailOriginName},
					   #{detailChangeName})
	</insert>
	
	<insert id="insertNotice" parameterType="Notice">
		INSERT INTO NOTICE(NOTICE_NO,
						   NOTICE_TITLE,
						   NOTICE_CONTENT,
						   CREATEDATE)
					VALUES(NOT_SEQ.NEXTVAL,
						   #{noticeTitle},
						   #{noticeContent},
						   SYSDATE)
	</insert>
	



</mapper>